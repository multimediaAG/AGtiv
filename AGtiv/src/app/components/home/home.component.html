<div class="container">
    <div class="text-center text-white mb-5">
        <h1 class="mb-3 display-1 font-weight-bold headline d-block d-md-none"><i>AG</i>tiv</h1>
        <h1 class="mb-3 display-1 font-weight-bold headline d-none d-md-block"> Mach mit bei <i>AG</i>tiv!</h1>
        <h2 class="headline">Die interaktive Radel- und Lauf-Aktion des Allg&auml;u-Gymnasiums Kempten</h2>
    </div>

    <div class="card p-3 mb-3">
        <h3 class="text-center" *ngIf="authenticationService.loggedIn">Hallo {{authenticationService.currentUser.username}}!
        </h3>
        <h3 class="text-center" *ngIf="!authenticationService.loggedIn">
            <i class="fa fa-running text-secondary pt-5 d-inline d-md-none mr-2"></i>Liebe Mitglieder der Schulgemeinschaft!
            <i class="fa fa-bicycle text-secondary pt-5 d-inline d-md-none ml-2"></i>
        </h3>
        <div class="alert alert-warning" *ngIf="authenticationService.loggedIn && authenticationService.currentUser.hasHiddenWays">
            <b>Wichtig!</b><br> Mindestens eine deiner eingegebenen Strecken wurde <b>ausgeblendet</b>, weil sie als Tagesleistung nicht realistisch erscheint.<br> Du kannst diese Distanz <a routerLink="/my-ways">hier anpassen</a> oder Dich bei Herrn
            Herz über Teams melden.
        </div>
        <div class="d-flex justify-space-between text-center">
            <div class="d-none d-md-block">
                <i class="fa fa-running fa-7x text-secondary pt-5"></i>
                <a href="/assets/info/Ausdauerguide_Laufen.pdf" target="_blank" class="btn btn-outline-primary mt-5">Zum Ausdauerguide Laufen</a>
            </div>
            <span class="px-3 pt-3 ">
                <p>- Das AG radelt, rollert und läuft gemeinsam einmal um die Welt! -</p>
                <p>Ziel unseres Projekts <b><i>AG</i>tiv</b> ist es, eine Abwechslung zum momentan sehr bewegungsarmen Home School Alltag zu bieten und auch in Zeiten des social distancing den Gemeinschaftsgeist am Allgäu-Gymnasium zu pflegen. </p>
                <p>Mit einer <b>sportlichen Gemeinschaftsleistung</b> der gesamten Schulfamilie wollen wir versuchen, einmal virtuell die Welt zu umrunden!
                Aktuell leisten <span class="badge badge-primary">{{userCount}} Teilnehmer</span> der Schulfamilie ihren Beitrag für dieses Ziel.
            </p>
            <p>Jedes Mitglied der Schulfamilie - egal ob Radler, Läufer oder Inliner/Skiroller - kann jeden Tag einen kleinen Beitrag dazu leisten. Näheres erfahrt Ihr in den Regeln. </p>
            <p>Zum Mitmachen eingeladen sind alle Schülerinnen und Schüler, deren Eltern und sowie alle Lehrkräfte am Allgäu-Gymnasium. </p>

            <p>Viel Spaß beim Trainieren! </p>
            <p>Eure Fachschaft Sport</p>
            <p class="p-2 border-warning border bg-warning-light">Der derzeitige Träger des gelben Trikots der Gesamtwertung: <b>{{bestUser.username}} ({{bestUser.grade}})</b> </p>

            <div class="d-block d-md-none">
                <a href="/assets/info/Ausdauerguide_Laufen.pdf" target="_blank" class="btn btn-outline-primary mt-2 d-block">Zum Ausdauerguide Laufen <i class="fa fa-running"></i></a>
                <a href="/assets/info/Ausdauerguide_Bike.pdf" target="_blank" class="btn btn-outline-primary mt-2 d-block">Zum Ausdauerguide Radeln <i class="fa fa-bicycle"></i></a>
            </div>
            </span>
            <div class="d-none d-md-block">
                <i class="fa fa-bicycle fa-7x text-secondary pt-5"></i>
                <a href="/assets/info/Ausdauerguide_Bike.pdf" target="_blank" class="btn btn-outline-primary mt-5">Zum Ausdauerguide Radeln</a>
            </div>
        </div>
    </div>

    <div class="card p-3 mb-4" *ngIf="!authenticationService.loggedIn">
        <h3 class="text-center">Jetzt mitmachen!</h3>
        <div class="row">
            <a class="btn btn-outline-success col-4 mr-2 offset-2" routerLink="/signup"><i class="fas fa-user-plus"></i> Registrieren</a>
            <a class="btn btn-outline-primary col-4 ml-2" routerLink="/login"><i class="fas fa-sign-in-alt"></i> Anmelden</a>
        </div>
        <!--
        <div class="row" *ngIf="authenticationService.loggedIn">
            <a class="btn btn-outline-success col-4 mr-2 offset-2" routerLink="/my-ways">Meine Strecken</a>
            <a class="btn btn-outline-primary col-4 ml-2" routerLink="/scores">Bestenliste</a>
        </div>-->
    </div>

    <div class="card p-3 mb-3">
        <div class="row text-center" *ngIf="currentDistanceLoaded">
            <div class="col-12 col-sm-4">
                <div class="info mx-auto">
                    <i class="fas fa-map-marker-alt fa-3x text-secondary mr-2 mt-1 mb-2"></i>
                </div>
                <img [src]="getImg(lastCity)" class="city" alt="Letzte Stadt">
                <div>
                    <h3>{{ lastCity.name }}</h3>
                    in <a [href]="'https://de.wikipedia.org/wiki/' + lastCity.countryName" target="_blank">{{ lastCity.countryName }}</a>
                    <flag-icon class="ml-1" [country]="lastCity.country" squared></flag-icon>
                </div>

            </div>
            <div class="col-12 col-sm-4 status">
                <h4 class="text-center">
                    <i class="fa fa-sign text-secondary pt-5 d-inline  mr-2"></i>
                    <span>Zusammen haben wir erreicht:<br><b>{{currentDistance}} km</b></span>
                </h4>
                <h4 class="text-center" *ngIf="currentDistanceLoaded">
                    <i class="fa fa-map-signs text-secondary pt-5 d-inline  mr-2"></i>
                    <span>Unser nächstes Ziel erreichen wir in:<br><b>{{ nextCity.distance - currentStepDistance }} km</b></span>
                </h4>


                <div class="progress w-100">
                    <div class="progress-bar" role="progressbar" [style.width]="currentStepDistance / nextCity.distance * 100 + '%'"></div>
                </div>
                Nur noch {{ nextCity.distance - currentStepDistance }} km bis {{ nextCity.name }}, {{ nextCity.countryName }}
                <flag-icon [country]="nextCity.country" squared></flag-icon>

                <div class="row mt-5" *ngIf="authenticationService.loggedIn">
                    <a class="btn btn-outline-success col-4 mr-2 offset-2" routerLink="/my-ways">Meine Strecken</a>
                    <a class="btn btn-outline-primary col-4 ml-2" routerLink="/scores">Bestenliste</a>
                </div>
            </div>
            <div class="col-12 col-sm-4">
                <div class="info mx-auto">
                    <i class="fas fa-location-arrow fa-3x text-secondary mr-2 mt-1 mb-2"></i>

                </div>
                <img [src]="getImg(nextCity)" class="city" alt="Nächste Stadt">
                <div>
                    <h3>{{ nextCity.name }}</h3>
                    in <a [href]="'https://de.wikipedia.org/wiki/' + nextCity.countryName" target="_blank">{{ nextCity.countryName }}</a>
                    <flag-icon class="ml-1" [country]="nextCity.country" squared></flag-icon>
                </div>
            </div>
            <div class="text-left px-5 mt-4">
                <info-bike-distance></info-bike-distance>
            </div>
        </div>
        <div class="alert alert-primary" *ngIf="!currentDistanceLoaded">
            <i class="fas fa-spinner fa-spin"></i> Laden...
        </div>
    </div>
    <div class="card p-3">
        <img class="img-fluid" alt="Karte wird geladen..." [src]="mapSrc">
    </div>
</div>